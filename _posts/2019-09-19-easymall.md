

## 项目准备

* 创建easymall-common-resources工程,里面包含了项目需要使用的javabean和util工具类,在其他工程里导入此依赖就可以复用
* 创建easymall-parent的pom工程
 - 继承springboot
 - springcloud依赖
 - 持久层(jdbc,mysql,mybatis)mybatis依赖
 - redis
 - ES
## 产品工程

### 分页查询

#### application.properties

```
server.port=10001
server.contextPath=/
#dataSource
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql:///easydb?useUnicode=true&characterEncoding=utf8&autoReconnect=true&allowMultiQueries=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
#mybatis 别名 映射包
mybatis.typeAliasesPackage=com.jt.common.pojo
mybatis.mapperLocations=classpath:mapper/*.xml
mybatis.configuration.mapUnderscoreToCamelCase=true
mybatis.configuration.cacheEnabled=false

#serverid
spring.application.name=productservice
eureka.client.serviceUrl.defaultZone=http://localhost:8888/eureka
```

#### 启动类

此工程是一个服务

```java
@SpringBootApplication
@MapperScan("cn.tedu.product.mapper")
@EnableEurekaClient
public class StarterProductService {
	public static void main(String[] args) {
		SpringApplication.run(StarterProductService.class, args);
	}
}
```

#### controller


```java
@RestController
@RequestMapping("/product/manage")
public class ProductController {
	@Autowired
	private ProductService productService;
	//分页查询功能
	
	@RequestMapping("pageManage")
	public EasyUIResult queryPageProducts(Integer page,Integer rows){
		//page:页数
		//rows:每页的条数
		//在业务层封装EasyYIResult对象
		EasyUIResult result= productService.queryPageProducts(page,rows);
		return result;
	}
}
```

#### service

计算出总页数,从数据库中查出当前页的数据

```java
@Service
public class ProductService {
	@Autowired
	private ProductMapper productMapper;
	public EasyUIResult queryPageProducts(Integer page, Integer rows) {
		//准备EasyUIResult 
		EasyUIResult result=new EasyUIResult();
		//total
		int total=productMapper.selectProductCount();
		
		result.setTotal(total);
		//rows List<Product>对象
		int start=(page-1)*rows;
		List<Product> pList=productMapper.selectProductList(start,rows);
		result.setRows(pList);
		return result;
	}
}
```

#### mapper
在有多个参数时,在参数前添加@Param注解

```java
public interface ProductMapper {
	public int selectProductCount();
	//在方法中存在多个参数,使用Param注解,实现parameter的翻译导入
	public List<Product> selectProductList(@Param("start")int start, @Param("rows")Integer rows);
}
```

#### mapper.xml

```xml
<mapper namespace="cn.tedu.product.mapper.ProductMapper">
	<select id="selectProductCount" resultType="int">
	select count(product_id) from t_product;
	</select>
	<select id="selectProductList" resultType="Product">
	select * from t_product limit #{start},#{rows};
	</select>
</mapper> 
```

