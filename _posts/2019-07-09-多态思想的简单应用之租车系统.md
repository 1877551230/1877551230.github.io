---
layout:     post
title:      多态思想的简单应用之租车系统
subtitle:   
date:       2019-07-09
categories: Java
author:     miracle
catalog: true
tags:
    - Java面向对象
    - Java练习
---

### 汽车租赁系统(抽象类,接口,多态的收尾小项目)

* 所有的汽车都具备品牌,车牌号,日租金  
* 大巴车Bus:大巴车有很多座位
* 普通轿车Car:有排量  
* 商务车Mpv:空间大

**要求:**根据不同的车型,有不同的计算日租金的方法和租车的流程  
* 大巴车:
  日租金1000,押金10W,3天起租
  5年内没有任何扣分的A驾照
* 普通轿车:
  日租金400,押金5W,1天起租
  1年内没有任何扣分的C驾照
* 商务车:
  日租金800,押金8W,2天起租
  3年内没有扣分的B驾照

之前的例子都是老师带着写的,这个例题是自己思考完成的,把自己的想法记录下来



#### 解答

在这个例题中,我们发现一共有两个方法,一个是计算租金的方法,一个是租车的流程,一开始我就在接口中写了这两个方法,但是发现复用性不高,结构不优化,于是我就把租车流程改成得到要租的天数,在提交时再进行逻辑对比

RentSystem.java

```java
public interface RentSystem {
	public int daysOfRent();

	public int calcExpend();

}
```

所有的租车都有共同的属性,就是品牌,车牌号码,日租金,租用天数,押金    
方法就是得到租用的天数和计算租金,计算租金所有车都一样,所以只对这个方法进行重写,所以做抽象类  

RentType.java

```java
public abstract class RentType implements RentSystem {
	private String brand;//车的品牌
	private String plateNum;//车牌号
	private int retalOfDay;//日租金
	private int daysOfRent;//租的天数
	private int deposit;//租金



	public int getDeposit() {
		return deposit;
	}

	public void setDeposit(int deposit) {
		this.deposit = deposit;
	}

	public int getDaysOfRent() {
		return daysOfRent;
	}

	public void setDaysOfRent(int daysOfRent) {
		this.daysOfRent = daysOfRent;
	}

	public String getBrand() {
		return brand;
	}

	public void setBrand(String brand) {
		this.brand = brand;
	}

	public String getPlateNum() {
		return plateNum;
	}

	public void setPlateNum(String plateNum) {
		this.plateNum = plateNum;
	}

	public int getRetalOfDay() {
		return retalOfDay;
	}

	public void setRetalOfDay(int retalOfDay) {
		this.retalOfDay = retalOfDay;
	}


	@Override
	public int calcExpend() {
		int rental = this.getRetalOfDay()*this.getDaysOfRent();
		return rental;
	}

}

}
```

Bus.java

```java
public class Bus extends RentType {

	@Override
	public int calcExpend() {
		int rental = this.getRetalOfDay()*this.getDaysOfRent();
		return rental;
	}

}

```

Car.java

```java
public class Car extends RentType {


	@Override
	public int daysOfRent() {
		
		return this.daysOfRent();
	}
	
	@Override
	public int calcExpend() {
		int rental = this.getRetalOfDay()*this.getDaysOfRent();
		return rental;

	}

}

```

Mpv.java

```java
public class Mpv extends RentType {


	@Override
	public int daysOfRent() {
		
		return this.daysOfRent();
	}

	@Override
	public int calcExpend() {
		int rental = this.getRetalOfDay()*this.getDaysOfRent();
		return rental;
	}

}
```

根据题目要求我们发现,还跟驾照有关系,但是租车和驾照是没有关联的,我们用户有ABC三种驾驶本,和租车之间是可以自由组合的,所以我们再定义一个接口驾照类,驾照一般就是得到积分(未扣分的年限),驾照的类型两种方法  

License.java

```java
public interface License {
	public String typeOfLicense();
	public int daysOfNoInfrige();

}
```

首先驾照的属性都会有未扣分年限,和驾照的类型,但是具体的驾照才能有具体的方法,所以定义抽象类

LicenseType.java

```java
public abstract class LicenseType implements License {
	private int daysOfNoInfrige;//定义未扣分的年限
	
	public int getDaysOfNoInfrige() {
		return daysOfNoInfrige;
	}

	public void setDaysOfNoInfrige(int daysOfNoInfrige) {
		this.daysOfNoInfrige = daysOfNoInfrige;
	}

	@Override
	public abstract String typeOfLicense() ;
	public abstract int daysOfNoInfrige();

}
```

然后不同的驾照,实现的方法不同

LicenseA.java

```java
public class LicenseA extends LicenseType {

	@Override
	public String typeOfLicense() {
		return "A本儿";

	}

	@Override
	public int daysOfNoInfrige() {
		int days = this.getDaysOfNoInfrige();
		return days;
	}
}
```

LicenseB.java

```java
public class LicenseB extends LicenseType {

	@Override
	public String typeOfLicense() {
		
		return "B本儿";
	}
	@Override
	public int daysOfNoInfrige() {
		int days = this.getDaysOfNoInfrige();
		return days;
	}

}
```

LicenseC.java

```java
public class LicenseC extends LicenseType {

	@Override
	public String typeOfLicense() {
		
		return "C本儿";
	}
	@Override
	public int daysOfNoInfrige() {
		int days = this.getDaysOfNoInfrige();
		return days;
	}

}
```

接下来写一个用户类,用户的属性有账户余额,在实际开发中,这个是银行的接口,我们先只写一个类  

User.java

```java
public class User {

private int money;
	
	public int getMoney() {
		return money;
	}

	public void setMoney(int money) {
		this.money = money;
	}
}

```

接下来写一个管理类,这里看做是提交订单,方式是核对账户余额,核对租用天数,和核对驾驶本,把这三个对象作为参数

Submit.java

```java
public class Submit {
	

	public void submit(RentSystem rent,License license,User user){
		if(rent instanceof Bus){
		if(user.getMoney()<100000){
			System.out.println("抱歉您的余额不足以支付押金");
		}else{
			if(rent.daysOfRent()<3){
				System.out.println("抱歉,我们Bus三天起租");
			}else{ 
				if(license.daysOfNoInfrige()<5)
				System.out.println("租车成功,除去押金,您需要额外支付"+rent.calcExpend()+"元");
				else{
					System.out.println("您的驾照不合格");
				}
			}
		}	
	 }
		if(rent instanceof Car){
			if(user.getMoney()<50000){
				System.out.println("抱歉您的余额不足以支付押金");
			}else{
				if(rent.daysOfRent()<1){
					System.out.println("抱歉,我们Bus一天起租");
				}else{ 
					if(license.daysOfNoInfrige()<1)
					System.out.println("租车成功,除去押金,您需要额外支付"+rent.calcExpend()+"元");
					else{
						System.out.println("您的驾照不合格");
					}
				}
			}	
		 }
		if(rent instanceof Mpv){
			if(user.getMoney()<80000){
				System.out.println("抱歉您的余额不足以支付押金");
			}else{
				if(rent.daysOfRent()<3){
					System.out.println("抱歉,我们Bus两天起租");
				}else{ 
					if(license.daysOfNoInfrige()<3)
					System.out.println("租车成功,除去押金,您需要额外支付"+rent.calcExpend()+"元");
					else{
						System.out.println("您的驾照不合格");
					}
				}
			}	
		 }
	}

}
```

最后一个测试类

Demo1.java

```java
public class Demo1 {

	public static void main(String[] args) {
		Submit submit = new Submit();
		User user = new User();
		user.setMoney(100000);
		
		List list = new List();
		
		Bus bus = (Bus)list.choose("bus");
		bus.setBrand("长城");
		bus.setPlateNum("S001");
		bus.setRetalOfDay(1000);
		
		bus.setDaysOfRent(3);
		submit.submit(bus, new LicenseA(),user);

	}

}
```