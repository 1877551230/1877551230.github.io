---
layout:     post
title:      多态思想的简单应用之计算工资
subtitle:   
date:       2019-07-09
categories: Java
author:     miracle
catalog: true
tags:
    - Java练习
---


#### 训练要点

* 多态的使用  
* 使用父类类型作为方法参数
  

#### 需求说明：
  
* 计算员工工资，每个员工都有一个唯一的员工编号，普通员工工资=基本工资+日工资x工作天数，销售人员工资=基本工资+销售额x015;部门经理工资=基本工资+奖金。  
* 计算工资增幅比率，增幅比率=上涨工资额/基本工资  

#### 解答


所有的人需要两个方法:计算薪水和增幅比率,所以做成接口  

IEmployee.java

```java
public interface IEmployee {
	public double calcSalary();
	public double increase();
}
```

所有的人都有基本工资,员工编号,所以创建一个抽象类,加入这两个属性,但是此时还不能确定具体的方法,所以不对接口中的方法进行重写

Employee.java

```java
public abstract class Employee implements IEmployee {
	private int baseSalary;
	private String empNo;
	
	public Employee() {
		
	}
	
	public Employee(int baseSalary, String empNo) {
		
		this.baseSalary = baseSalary;
		this.empNo = empNo;
	}

	public int getBaseSalary() {
		return baseSalary;
	}

	public void setBaseSalary(int baseSalary) {
		this.baseSalary = baseSalary;
	}

	public String getEmpNo() {
		return empNo;
	}

	public void setEmpNo(String empNo) {
		this.empNo = empNo;
	}

	@Override
	public abstract double calcSalary();

	@Override
	public abstract double increase();

}
```

接下来开始写一些具体的类实现需要的方法  
普通员工类:普通员工工资=基本工资+日工资x工作天数  
由此得到,普通员工有自己特殊的属性 工作天数和日工资,然后对计算薪水方法和计算增幅比率的方法重写

CommonEmployee.java

```java
public class CommonEmployee extends Employee {
	private int days;
	private int salaryOfDay;
	
	public CommonEmployee(){
		
	}
	public CommonEmployee(String empNo,int baseSalary,int days, int salaryOfDay) {
		super(baseSalary,empNo);
		this.days = days;
		this.salaryOfDay = salaryOfDay;
	}

	public int getDays() {
		return days;
	}

	public void setDays(int days) {
		this.days = days;
	}

	public int getSalaryOfDay() {
		return salaryOfDay;
	}

	public void setSalaryOfDay(int salaryOfDay) {
		this.salaryOfDay = salaryOfDay;
	}

	@Override
	public double calcSalary() {
		double salary = 0;
		salary = getBaseSalary()+this.days*this.salaryOfDay;
		return salary;
	}

	@Override
	public double increase() {
		double rate = 0;
		rate  = (this.days*this.salaryOfDay)/getBaseSalary();
		return rate;
	}

}
```

销售人员类  基本工资+销售额x015  
由此得到自己的属性是销售额,然后对计算薪水方法和计算增幅比率的方法重写  

SaleEmployee.java

```java
public class SaleEmployee extends Employee {
	private int saleMoney;
	

	public int getSaleMoney() {
		return saleMoney;
	}

	public void setSaleMoney(int saleMoney) {
		this.saleMoney = saleMoney;
	}

	@Override
	public double calcSalary() {
		double salary = 0;
		salary = getBaseSalary()+this.saleMoney*0.15;
		return salary;
	}

	@Override
	public double increase() {
		double rate = 0;
		rate = (this.saleMoney*0.15)/getBaseSalary();
		return rate;
	}

}
```

经理员工类:有特殊的属性是奖金,然后对计算薪水的方法和增幅比率的方法进行重写

ManagerEmployee.java

```java
public class ManagerEmployee extends Employee {
	private int bonus;

	public int getBonus() {
		return bonus;
	}

	public void setBonus(int bonus) {
		this.bonus = bonus;
	}

	@Override
	public double calcSalary() {
		double salary;
		salary = getBaseSalary()+this.bonus;
		return salary;
	}

	@Override
	public double increase() {
		double rate = 0;
		rate=this.bonus/getBaseSalary();
		return rate;
	}

}
```

我们需要一个管理类,来使用接口里的方法,我们把它叫做财务类,来计算不同对象的工资和增幅比率

```java
public class Finance {
	public double calcSalary(IEmployee ie){
		return ie.calcSalary();
		
	}
	public double increase(IEmployee ie){
		return ie.increase();
	}

}
```

为了更好地理解多态,我们做一个简单工厂类,来批量生产(new)一些需要的对象,是以长辈作为函数的返回值的形式,我们把它叫做人事类,这里理解为统计需要发工资的名单

Personal.java

```java
public class Personal {
	public static IEmployee deploy(String type){
		IEmployee ie = null;
		if("comm".equals(type)){
			ie = new CommonEmployee();
		}else if("sale".equals(type)){
			ie = new SaleEmployee();
		}else if("manager".equals(type)){
			ie = new ManagerEmployee();
		}
		return ie;
	}

}
```

最后需要一个测试类(使用类)  
通过财务类来发放工资

Demo1.java

```java
public class Demo1 {

	public static void main(String[] args) {
		/**
		 * 通过人事类发布员工名单
		 */
		CommonEmployee comm = (CommonEmployee)Personal.deploy("comm");
		SaleEmployee sale = (SaleEmployee)Personal.deploy("sale");
		ManagerEmployee manager = (ManagerEmployee)Personal.deploy("manager");
		//给普通员工赋值
		comm.setEmpNo("E001");
		comm.setBaseSalary(5000);
		comm.setDays(22);
		comm.setSalaryOfDay(1000);
		
		//给销售员工赋值
		sale.setEmpNo("E002");
		sale.setBaseSalary(3000);
		sale.setSaleMoney(1000000);
		
		//给经理员工赋值
		manager.setEmpNo("E003");
		manager.setBaseSalary(15000);
		manager.setBonus(100000);
		
		//通过财务类发工资
		Finance finance =  new Finance();
		System.out.println(finance.calcSalary(comm));
		System.out.println(finance.calcSalary(sale));
		System.out.println(finance.calcSalary(manager));
		
		System.out.println(finance.increase(comm));
		System.out.println(finance.increase(sale));
		System.out.println(finance.increase(manager));
	}

}
```