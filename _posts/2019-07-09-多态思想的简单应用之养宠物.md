---
layout:     post
title:      多态思想的简单应用之养宠物
subtitle:   
date:       2019-07-09
categories: Java
author:     miracle
catalog: true
tags:
    - Java面向对象
    - Java练习
---

#### 训练要点：

* 子类到父类的自动类型转换
* 使用父类作为方法形参实现多态
* 多态可以减少代码量，可以提高代码的可扩展性和可维护性

#### 需求说明：

* 实现喂养宠物功能
* 不同宠物吃的东西不同
* 主人可以喂养不同类型宠物

#### 解答

首先我们分析功能,宠物共同点就是喂养,玩,治疗  
所以首先要有一个接口来表达基本的功能

IPet.java

```java
public interface IPet {
	public void cure();//治疗
	public void feed();//喂养
	public void play();//玩

}
```

接着,宠物有自己的属性,共同的属性有比如名字  
于是创建一个类Pet.java,由于此时还未具体到宠物,所以没办法对接口里的方法重写,所以是抽象类

Pet.java

```java
public abstract class Pet implements IPet {
	private String name;
	
	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}
	public Pet(){
		
	}
	public Pet(String name) {
		
		this.name = name;
	}

	@Override
	public abstract void cure();

	@Override
	public abstract void feed();
	@Override
	public abstract void play();

}
```
这时候,我们需要具体到什么宠物了,比如有狗狗,狗狗专有的属性是品种,所以为他增加一个品种属性  
狗狗是一种具体的宠物,所以可以重写玩,吃,治疗的方法

Dog.java

```java
public class Dog extends Pet {
	private String type;
	public Dog() {
		
	}
	
	public Dog(String name,String type) {
		super(name);
		this.type = type;
	}

	public String getType() {
		return type;
	}

	public void setType(String type) {
		this.type = type;
	}

	@Override
	public void cure() {
		System.out.println("打针,吃药");

	}

	@Override
	public void feed() {
		System.out.println("啃骨头");

	}

	@Override
	public void play() {
		System.out.println("接球或飞盘");

	}

}
```

猴子类:有属于自己的属性,比如猴屁股的颜色,猴屁股颜色可不一定都是红的,可以去动物园自己多观察一下  
猴子的治疗方法,吃,玩的方法肯定也不一样,所以重写

Monkey.java

```java
public class Monkey extends Pet {

	private String assColor;
	public Monkey(){
		
	}
	public Monkey(String name,String assColor) {
		super(name);
		this.assColor = assColor;
	}

	public String getAssColor() {
		return assColor;
	}

	public void setAssColor(String assColor) {
		this.assColor = assColor;
	}

	@Override
	public void cure() {
		System.out.println("冥想静坐");

	}

	@Override
	public void feed() {
		System.out.println("吃香蕉");

	}

	@Override
	public void play() {
		System.out.println("敲代码");

	}

}
```

接下来,我们写一个管理类,来实现接口里的方法,这里理解为宠物的主人,我们就叫他主人类  
以长辈作为函数或方法的参数  

Master.java

```java
public class Master {
	public void cure(IPet pet){
		pet.cure();
	}
	public void feed(IPet pet){
		pet.feed();
	}
	public void play(IPet pet){
		pet.play();
		
	}

}
```

为了更好地理解多态,我们写一个简单工厂类,用来批量生产(new)对象,可以没有这个类,可以直接new对象,这里理解为得到宠物

GetPet.java

```java
public class GetPet {
	public static  IPet get(String type){
		IPet ip = null;
		if("dog".equals(type)){
			ip = new Dog();
		}else if("penguin".equals(type)){
			ip = new Penguin();
		}else if("monkey".equals(type)){
			ip = new Monkey();
		}
		return ip;
	}
	
}

```

最后写一个测试类,测试方法用了多种方式来表示,有的用了工厂方法,有的直接new对象.

Demo1.java

```java
public class Demo1 {

	public static void main(String[] args) {
		Master m = new Master();
		Dog dog = (Dog)GetPet.get("dog");
		dog.setName("钢镚");
		dog.setType("柯基");
		m.cure(dog);
		Penguin p = new Penguin();
		p.setName("p仔");
		p.setSex("公");
		m.feed(p);
		m.cure( GetPet.get("dog"));

	}

}
```